import{d as j,r as g,ao as Z,N as ge,q as K,e as ye,o as p,c as k,m as e,i as t,D as S,A as D,B as M,a3 as xe,j as s,a as l,I as U,V as B,a8 as ae,Q as se,C as q,E as O,F as P,K as x,f as A,P as te,ah as me,M as T,a2 as N,t as R,_ as le,R as he,S as be,aa as Ve,a9 as we,a7 as oe,a4 as ne,W as z,G as Ce,H as ke,L as fe,aH as ie,a1 as w,aI as ee,Y as pe,aw as _e,X as I,Z as J,ar as ue,O as re,av as Se,ax as $e,aJ as Re,aK as Ue,b as Ie,aL as De,aM as Fe,aN as Ae,aO as W,T as Y}from"./index-5c0d31d7.js";import{r as de}from"./index-705cb9e8.js";import{_ as ve}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-675e96f8.js";import{c as Ee}from"./index-d2c33d5a.js";const Pe={class:"d-flex flex-column justify-center gap-5"},Te={class:"d-flex flex-wrap gap-2"},Be=l("span",{class:"d-none d-sm-block"},"上传头像",-1),Le=l("span",{class:"d-none d-sm-block"},"重置",-1),He=l("p",{class:"text-body-1 mb-0"}," 允许 JPG、GIF 或 PNG 格式， 最大尺寸 800K。 ",-1),Me=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," 用户名 "),l("th",{scope:"col"}," 邮箱 "),l("th",{scope:"col"}," 状态 "),l("th",{scope:"col"}," 管理员 "),l("th",{scope:"col",class:"w-5"})])],-1),Ne=j({__name:"AccountSettingAccount",setup(L){const r=g(!1),i=g(!1),f=g(!1),_=g(""),d=g(""),c=Z.useToast(),V=g(),m=g(!1),h=ge({name:"",password:"",email:""}),b=g({id:0,name:"",password:"",email:"",is_active:!1,is_superuser:!1,avatar:""}),$=g([]);function E(y){const u=new FileReader,{files:X}=y.target;X&&X.length>0&&(u.readAsDataURL(X[0]),u.onload=()=>{typeof u.result=="string"&&(b.value.avatar=u.result,o())})}function G(){b.value.avatar=ie}async function a(){try{const y=await w.get("user/current");b.value=y,b.value.avatar||(b.value.avatar=ie)}catch(y){console.log(y)}}async function o(){if(_.value||d.value){if(_.value!==d.value){c.error("两次输入的密码不一致");return}b.value.password=_.value}try{const y=await w.put("user",b.value);y.success?c.success("用户信息保存成功！"):c.error(`用户信息保存失败：${y.message}！`)}catch(y){console.log(y)}}async function n(){try{const y=await w.get("/user");$.value=y}catch(y){console.log(y)}}async function C(y){try{const u=await w.delete(`user/${y.name}`);u.success?(c.success("用户删除成功！"),n()):c.error(`用户删除失败：${u.message}！`)}catch(u){console.log(u)}}async function F(y){try{y.is_active=!y.is_active;const u=await w.put("user",y);u.success?(c.success("用户冻结成功！"),n()):c.error(`用户冻结失败：${u.message}！`)}catch(u){console.log(u)}}async function H(){try{const y=await w.post("user",h);y.success?(c.success("用户新增成功！"),n(),m.value=!1):c.error(`用户新增失败：${y.message}！`)}catch(y){console.log(y)}}return K(()=>{a(),n()}),(y,u)=>{const X=ye("IconBtn");return p(),k(T,null,[e(q,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(D,{title:"个人信息"},{default:t(()=>[e(M,{class:"d-flex"},{default:t(()=>[e(xe,{rounded:"lg",size:"100",class:"me-6",image:s(b).avatar},null,8,["image"]),l("form",Pe,[l("div",Te,[e(U,{color:"primary",onClick:u[0]||(u[0]=v=>{var Q;return(Q=s(V))==null?void 0:Q.click()})},{default:t(()=>[e(B,{icon:"mdi-cloud-upload-outline",class:"d-sm-none"}),Be]),_:1}),l("input",{ref_key:"refInputEl",ref:V,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:E},null,544),e(U,{type:"reset",color:"error",variant:"tonal",onClick:G},{default:t(()=>[Le,e(B,{icon:"mdi-refresh",class:"d-sm-none"})]),_:1})]),He])]),_:1}),e(ae),e(M,null,{default:t(()=>[e(se,{class:"mt-6"},{default:t(()=>[e(q,null,{default:t(()=>[e(S,{md:"6",cols:"12"},{default:t(()=>[e(O,{modelValue:s(b).name,"onUpdate:modelValue":u[1]||(u[1]=v=>s(b).name=v),readonly:"",label:"用户名"},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(b).email,"onUpdate:modelValue":u[2]||(u[2]=v=>s(b).email=v),label:"邮箱",type:"email"},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(_),"onUpdate:modelValue":u[3]||(u[3]=v=>P(_)?_.value=v:null),type:s(r)?"text":"password","append-inner-icon":s(r)?"mdi-eye-off-outline":"mdi-eye-outline",label:"新密码",autocomplete:"new-password","onClick:appendInner":u[4]||(u[4]=v=>r.value=!s(r))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(d),"onUpdate:modelValue":u[5]||(u[5]=v=>P(d)?d.value=v:null),type:s(i)?"text":"password","append-inner-icon":s(i)?"mdi-eye-off-outline":"mdi-eye-outline",label:"确认新密码","onClick:appendInner":u[6]||(u[6]=v=>i.value=!s(i))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(S,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(U,{onClick:o},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(b).is_superuser?(p(),A(S,{key:0,cols:"12"},{default:t(()=>[e(D,{title:"所有用户"},{append:t(()=>[e(X,{onClick:u[7]||(u[7]=te(v=>m.value=!0,["stop"]))},{default:t(()=>[e(B,{icon:"mdi-plus"})]),_:1})]),default:t(()=>[e(me,{class:"text-no-wrap"},{default:t(()=>[Me,l("tbody",null,[(p(!0),k(T,null,N(s($),v=>(p(),k("tr",{key:v.name},[l("td",null,R(v.name),1),l("td",null,R(v.email),1),l("td",null,[v.is_active?(p(),A(le,{key:0,color:"success","text-color":"white"},{default:t(()=>[x(" 激活 ")]),_:1})):(p(),A(le,{key:1,color:"error","text-color":"white"},{default:t(()=>[x(" 冻结 ")]),_:1}))]),l("td",null,R(v.is_superuser?"是":"否"),1),l("td",null,[he(e(X,null,{default:t(()=>[e(B,{icon:"mdi-dots-vertical"}),e(Ve,{activator:"parent","close-on-content-click":""},{default:t(()=>[e(we,null,{default:t(()=>[e(oe,{variant:"plain",onClick:Q=>F(v)},{prepend:t(()=>[e(B,{icon:"mdi-lock"})]),default:t(()=>[e(ne,null,{default:t(()=>[x(R(v.is_active?"冻结":"解冻"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(oe,{variant:"plain","base-color":"error",onClick:Q=>C(v)},{prepend:t(()=>[e(B,{icon:"mdi-delete"})]),default:t(()=>[e(ne,null,{default:t(()=>[x("删除")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536),[[be,s(b).is_superuser&&s(b).name!=v.name]])])]))),128))])]),_:1})]),_:1})]),_:1})):z("",!0)]),_:1}),e(fe,{modelValue:s(m),"onUpdate:modelValue":u[13]||(u[13]=v=>P(m)?m.value=v:null),"max-width":"800",persistent:""},{default:t(()=>[e(D,{title:"新增用户"},{default:t(()=>[e(M,null,{default:t(()=>[e(se,{onSubmit:te(()=>{},["prevent"])},{default:t(()=>[e(q,null,{default:t(()=>[e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).name,"onUpdate:modelValue":u[8]||(u[8]=v=>s(h).name=v),label:"用户名",rules:[s(de)]},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).password,"onUpdate:modelValue":u[9]||(u[9]=v=>s(h).password=v),label:"密码",rules:[s(de)],type:s(f)?"text":"password","append-inner-icon":s(f)?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":u[10]||(u[10]=v=>f.value=!s(f))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(S,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).email,"onUpdate:modelValue":u[11]||(u[11]=v=>s(h).email=v),label:"邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(Ce,null,{default:t(()=>[e(U,{onClick:u[12]||(u[12]=v=>m.value=!1)},{default:t(()=>[x(" 取消 ")]),_:1}),e(ke),e(U,{onClick:H},{default:t(()=>[x(" 确定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),je=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," 消息类型 "),l("th",{scope:"col"}," 微信 "),l("th",{scope:"col"}," Telegram "),l("th",{scope:"col"}," Slack ")])],-1),Ge={key:0},qe=l("td",{colspan:"4",class:"text-center"}," 没有设置任何通知渠道 ",-1),Oe=[qe],We={class:"d-flex flex-wrap gap-4 mt-4"},Ye=j({__name:"AccountSettingNotification",setup(L){const r=g([]),i=Z.useToast();async function f(){try{const d=await w.get("message/switchs");r.value=d}catch(d){console.log(d)}}async function _(){try{(await w.post("message/switchs",r.value)).success?i.success("保存通知消息设置成功"):i.error("保存通知消息设置失败！")}catch(d){console.log(d)}}return K(()=>{f()}),(d,c)=>(p(),A(D,{title:"消息通知"},{default:t(()=>[e(M,null,{default:t(()=>[x(" 对应消息类型只会发送给选中的消息渠道 ")]),_:1}),e(me,{class:"text-no-wrap"},{default:t(()=>[je,l("tbody",null,[(p(!0),k(T,null,N(s(r),V=>(p(),k("tr",{key:V.mtype},[l("td",null,R(V.mtype),1),l("td",null,[e(ee,{modelValue:V.wechat,"onUpdate:modelValue":m=>V.wechat=m},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(ee,{modelValue:V.telegram,"onUpdate:modelValue":m=>V.telegram=m},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(ee,{modelValue:V.slack,"onUpdate:modelValue":m=>V.slack=m},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),s(r).length===0?(p(),k("tr",Ge,Oe)):z("",!0)])]),_:1}),e(ae),e(M,null,{default:t(()=>[e(se,{onSubmit:te(()=>{},["prevent"])},{default:t(()=>[l("div",We,[e(U,{mtype:"submit",onClick:_},{default:t(()=>[x(" 保存 ")]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1}))}}),ce=j({__name:"FilterRuleCard",props:{pri:String,rules:Array,width:String,height:String},emits:["close","changed"],setup(L,{emit:r}){const i=L;function f(){r("close")}function _(V){r("changed",i.pri,V)}const d=g([{title:"特效字幕",value:" SPECSUB "},{title:"中文字幕",value:" CNSUB "},{title:"分辨率: 4K",value:" 4K "},{title:"分辨率: 1080P",value:" 1080P "},{title:"分辨率: 720P",value:" 720P "},{title:"排除: 720P",value:" !720P "},{title:"质量: 蓝光原盘",value:" BLU "},{title:"排除: 蓝光原盘",value:" !BLU "},{title:"质量: BLURAY",value:" BLURAY "},{title:"排除: BLURAY",value:" !BLURAY "},{title:"质量: UHD",value:" UHD "},{title:"排除: UHD",value:" !UHD "},{title:"质量: REMUX",value:" REMUX "},{title:"排除: REMUX",value:" !REMUX "},{title:"质量: WEB-DL",value:" WEBDL "},{title:"排除: WEB-DL",value:" !WEBDL "},{title:"编码: H265",value:" H265 "},{title:"排除: H265",value:" !H265 "},{title:"编码: H264",value:" H264 "},{title:"排除: H264",value:" !H264 "},{title:"效果: 杜比视界",value:" DOLBY "},{title:"排除: 杜比视界",value:" !DOLBY "},{title:"效果: HDR",value:" HDR "},{title:"排除: HDR",value:" !HDR "},{title:"国语配音",value:" CNVOI "},{title:"排除: 国语配音",value:" !CNVOI "},{title:"促销: 免费",value:" FREE "}]),c=g(i.rules??[]);return(V,m)=>{const h=ve;return p(),A(D,{variant:"tonal",width:i.width,height:i.height},{default:t(()=>[e(h,{onClick:f}),e(I,null,{default:t(()=>[e(pe,null,{default:t(()=>[x("优先级 "+R(i.pri),1)]),_:1}),e(q,null,{default:t(()=>[e(S,null,{default:t(()=>[(p(),A(_e,{key:i.pri,modelValue:s(c),"onUpdate:modelValue":[m[0]||(m[0]=b=>P(c)?c.value=b:null),_],variant:"underlined",items:s(d),chips:"",label:"",multiple:""},null,8,["modelValue","items"]))]),_:1})]),_:1})]),_:1})]),_:1},8,["width","height"])}}}),Ke={class:"grid gap-3 grid-filterrule-card"},Xe=l("span",{class:"d-none d-sm-block"},"增加规则",-1),ze={class:"grid gap-3 grid-filterrule-card"},Je=l("span",{class:"d-none d-sm-block"},"增加规则",-1),Ze=j({__name:"AccountSettingRule",setup(L){const r=Z.useToast(),i=g("seeder"),f=[{title:"站点优先",value:"site"},{title:"做种数优先",value:"seeder"}],_=g([]),d=g([]);async function c(a){var o,n;try{const C=await w.get(`system/setting/${a}`);if(C.success){const F=((n=(o=C.data)==null?void 0:o.value)==null?void 0:n.split(">"))??[],H=a==="FilterRules"?_:d;H.value=F==null?void 0:F.map((y,u)=>({pri:(u+1).toString(),rules:y.split("&"),visible:!0}))}}catch(C){console.log(C)}}async function V(){var a;try{const o=await w.get("system/setting/TorrentsPriority");i.value=(a=o.data)==null?void 0:a.value}catch(o){console.log(o)}}async function m(a){try{let o="";_.value.length!==0&&(o=(a==="FilterRules"?_:d).value.filter(H=>H.rules.length>0).map(H=>H.rules.join("&")).join(">"));const n=await w.post(`system/setting/${a}`,o),C=a==="FilterRules"?"过滤规则":"洗版规则";n.success?r.success(`${C}保存成功`):r.error(`${C}保存失败！`)}catch(o){console.log(o)}}async function h(){try{(await w.post("system/setting/TorrentsPriority",i.value)).success?r.success("优先规则保存成功"):r.error("优先规则保存失败！")}catch(a){console.log(a)}}function b(a,o){const n=_.value.find(C=>C.pri===a);n&&(n.rules=o)}function $(a,o){const n=d.value.find(C=>C.pri===a);n&&(n.rules=o)}function E(a,o){const n=a==="FilterRules"?_:d,C=n.value.findIndex(F=>F.pri===o);if(C!==-1){const F=[...n.value];F.splice(C,1),F.forEach((H,y)=>{H.pri=(y+1).toString()}),n.value=F}}function G(a){const o=a==="FilterRules"?_:d,C={pri:(o.value.length+1).toString(),rules:[],visible:!0};o.value.push(C)}return K(()=>{V(),c("FilterRules"),c("FilterRules2")}),(a,o)=>(p(),A(q,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(D,{title:"过滤规则"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 设置在搜索和订阅时默认使用的过滤规则 ")]),_:1}),e(I,null,{default:t(()=>[l("div",Ke,[(p(!0),k(T,null,N(s(_),(n,C)=>(p(),A(ce,{key:C,pri:n.pri,rules:n.rules,visible:n.visible,onChanged:b,onClose:F=>E("FilterRules",n.pri)},null,8,["pri","rules","visible","onClose"]))),128))])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",class:"me-2",onClick:o[0]||(o[0]=n=>m("FilterRules"))},{default:t(()=>[x(" 保存 ")]),_:1}),e(U,{color:"success",variant:"tonal",onClick:o[1]||(o[1]=n=>G("FilterRules"))},{default:t(()=>[e(B,{icon:"mdi-plus"}),Xe]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(D,{title:"洗版规则"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 设置在订阅洗版时使用的过滤规则，匹配优先级1时洗版完成 ")]),_:1}),e(I,null,{default:t(()=>[l("div",ze,[(p(!0),k(T,null,N(s(d),(n,C)=>(p(),A(ce,{key:C,pri:n.pri,rules:n.rules,visible:n.visible,onChanged:$,onClose:F=>E("FilterRules2",n.pri)},null,8,["pri","rules","visible","onClose"]))),128))])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",class:"me-2",onClick:o[2]||(o[2]=n=>m("FilterRules2"))},{default:t(()=>[x(" 保存 ")]),_:1}),e(U,{color:"success",variant:"tonal",onClick:o[3]||(o[3]=n=>G("FilterRules2"))},{default:t(()=>[e(B,{icon:"mdi-plus"}),Je]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(D,{title:"下载优先规则"},{default:t(()=>[e(M,null,{default:t(()=>[e(_e,{modelValue:s(i),"onUpdate:modelValue":o[4]||(o[4]=n=>P(i)?i.value=n:null),items:f,label:"优先规则",outlined:""},null,8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",onClick:h},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Qe=j({__name:"AccountSettingSite",setup(L){const r=Z.useToast(),i=g([]),f=g([]),_=g([]),d=g(!1),c=g("重置站点数据"),V=g(!1);async function m(){try{const a=await w.get("site");_.value=a.filter(o=>o.is_active),h(),$()}catch(a){console.log(a)}}async function h(){var a;try{const o=await w.get("system/setting/IndexerSites");i.value=((a=o.data)==null?void 0:a.value)??[]}catch(o){console.log(o)}}async function b(){try{(await w.post("system/setting/IndexerSites",i.value)).success?r.success("搜索站点保存成功"):r.error("搜索站点保存失败！")}catch(a){console.log(a)}}async function $(){var a;try{const o=await w.get("system/setting/RssSites");f.value=((a=o.data)==null?void 0:a.value)??[]}catch(o){console.log(o)}}async function E(){try{(await w.post("system/setting/RssSites",f.value)).success?r.success("订阅站点保存成功"):r.error("订阅站点保存失败！")}catch(a){console.log(a)}}async function G(){try{V.value=!0,c.value="正在重置...",(await w.get("site/reset")).success?(r.success("站点重置成功，请等待CookieCloud同步完成！"),m()):r.error("站点重置失败！"),V.value=!1,c.value="重置站点数据"}catch(a){console.log(a)}}return K(()=>{m()}),(a,o)=>(p(),A(q,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(D,{title:"搜索站点"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 只有选中的站点才会在搜索中使用")]),_:1}),e(I,null,{default:t(()=>[e(ue,{modelValue:s(i),"onUpdate:modelValue":o[0]||(o[0]=n=>P(i)?i.value=n:null),column:"",multiple:""},{default:t(()=>[(p(!0),k(T,null,N(s(_),n=>(p(),A(le,{key:n.id,color:s(i).includes(n.id)?"primary":"",filter:"",variant:"outlined",value:n.id},{default:t(()=>[x(R(n.name),1)]),_:2},1032,["color","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",onClick:b},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(D,{title:"订阅站点"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 只有选中的站点才会在订阅中使用")]),_:1}),e(I,null,{default:t(()=>[e(ue,{modelValue:s(f),"onUpdate:modelValue":o[1]||(o[1]=n=>P(f)?f.value=n:null),column:"",multiple:""},{default:t(()=>[(p(!0),k(T,null,N(s(_),n=>(p(),A(le,{key:n.id,color:s(f).includes(n.id)?"primary":"",filter:"",variant:"outlined",value:n.id},{default:t(()=>[x(R(n.name),1)]),_:2},1032,["color","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",onClick:E},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(D,{title:"站点重置"},{default:t(()=>[e(M,null,{default:t(()=>[l("div",null,[e(ee,{modelValue:s(d),"onUpdate:modelValue":o[2]||(o[2]=n=>P(d)?d.value=n:null),label:"确认删除所有站点数据并重新同步"},null,8,["modelValue"])]),e(U,{disabled:!s(d)||s(V),color:"error",class:"mt-3",onClick:G},{default:t(()=>[x(R(s(c)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),et=j({__name:"AccountSettingWords",setup(L){const r=Z.useToast(),i=g(""),f=g("");async function _(){var m;try{const h=await w.get("system/setting/CustomIdentifiers");i.value=(m=h.data)==null?void 0:m.value.join(`
`)}catch(h){console.log(h)}}async function d(){var m;try{const h=await w.get("system/setting/CustomReleaseGroups");f.value=(m=h.data)==null?void 0:m.value.join(`
`)}catch(h){console.log(h)}}async function c(){try{(await w.post("system/setting/CustomIdentifiers",i.value.split(`
`))).success?r.success("自定义识别词保存成功"):r.error("自定义识别词保存失败！")}catch(m){console.log(m)}}async function V(){try{(await w.post("system/setting/CustomReleaseGroups",f.value.split(`
`))).success?r.success("自定义制作组/字幕组保存成功"):r.error("自定义制作组/字幕组保存失败！")}catch(m){console.log(m)}}return K(()=>{_(),d()}),(m,h)=>(p(),A(q,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(D,{title:"自定义识别词"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 添加规则对种子名或者文件名进行预处理以校正识别 ")]),_:1}),e(I,null,{default:t(()=>[e(re,{modelValue:s(i),"onUpdate:modelValue":h[0]||(h[0]=b=>P(i)?i.value=b:null),"auto-grow":"",placeholder:`支持正则表达式，特殊字符需要\\转义，一行为一组，支持三种配置格式：
屏蔽词
被替换词 => 替换词
前定位词 <> 后定位词 >> 偏移量（EP）`},null,8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",onClick:c},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(D,{title:"自定义制作组/字幕组"},{default:t(()=>[e(J,null,{default:t(()=>[x(" 添加无法识别的制作组/字幕组 ")]),_:1}),e(I,null,{default:t(()=>[e(re,{modelValue:s(f),"onUpdate:modelValue":h[1]||(h[1]=b=>P(f)?f.value=b:null),"auto-grow":"",placeholder:"支持正则表达式，特殊字符需要\\转义，一行代表一个制作组/字幕组"},null,8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(U,{type:"submit",onClick:V},{default:t(()=>[x(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),tt={key:0,class:"mt-5 w-full text-center text-gray-500 text-sm flex flex-col items-center"},lt=l("span",{class:"mt-3"},"正在刷新 ...",-1),st=j({__name:"AccountSettingLogging",setup(L){const r=g([]);function i(){const f=$e.state.auth.token;if(f){const _=new EventSource(`/api/v1/system/logging?token=${f}`);_.addEventListener("message",d=>{const c=d.data;c&&r.value.push(c)}),Re(()=>{_.close()})}}return K(()=>{i()}),(f,_)=>(p(),A(q,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(D,{title:"实时日志"},{default:t(()=>[e(M,null,{default:t(()=>[s(r).length===0?(p(),k("div",tt,[e(Se,{size:"48",indeterminate:"",color:"primary"}),lt])):z("",!0),(p(!0),k(T,null,N(s(r),(d,c)=>(p(),k("div",{key:c},R(d),1))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}}),at={class:"px-3"},ot={class:"section"},nt=l("div",null,[l("h3",{class:"heading"}," 关于 MoviePilot ")],-1),it={class:"section border-t border-gray-800"},ut={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},rt=l("dt",{class:"block text-sm font-bold"}," 当前版本 ",-1),dt={class:"flex text-sm sm:col-span-2 sm:mt-0"},ct={class:"flex-grow flex flex-row items-center truncate"},mt={class:"truncate"},ft={key:0,href:"https://github.com/jxxghp/MoviePilot/releases",target:"_blank",rel:"noopener noreferrer"},pt=l("span",{class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap bg-green-500 bg-opacity-80 border border-green-500 !text-green-100 ml-2 !cursor-pointer transition hover:bg-green-400"}," 最新 ",-1),_t=[pt],vt={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},gt=l("dt",{class:"block text-sm font-bold"}," 配置目录 ",-1),yt={class:"flex text-sm sm:col-span-2 sm:mt-0"},xt={class:"flex-grow undefined"},ht=l("div",{class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},[l("dt",{class:"block text-sm font-bold"}," 数据目录 "),l("dd",{class:"flex text-sm sm:col-span-2 sm:mt-0"},[l("span",{class:"flex-grow undefined"},[l("code",null,"/moviepilot")])])],-1),bt={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},Vt=l("dt",{class:"block text-sm font-bold"}," 时区 ",-1),wt={class:"flex text-sm sm:col-span-2 sm:mt-0"},Ct={class:"flex-grow undefined"},kt=Ue('<div class="section"><div><h3 class="heading"> 支援 </h3></div><div class="section border-t border-gray-800"><dl><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 文档 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://github.com/jxxghp/MoviePilot/blob/main/README.md" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://github.com/jxxghp/MoviePilot/blob/main/README.md </a></span></dd></div></div><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 问题反馈 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://github.com/jxxghp/MoviePilot/issues/new/choose" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://github.com/jxxghp/MoviePilot/issues/new/choose </a></span></dd></div></div><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 发布频道 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://t.me/moviepilot_channel" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://t.me/moviepilot_channel </a></span></dd></div></div></dl></div></div>',1),St={class:"section"},$t=l("h3",{class:"heading"}," 软件版本 ",-1),Rt={class:"section space-y-3"},Ut={class:"flex w-full flex-grow items-center justify-start space-x-2 truncate sm:justify-start"},It={class:"truncate text-lg font-bold"},Dt={class:"mr-2 whitespace-nowrap text-xs font-normal"},Ft={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap cursor-default bg-green-500 bg-opacity-80 border border-green-500 !text-green-100"},At={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap cursor-default bg-indigo-500 bg-opacity-80 border border-indigo-500 !text-indigo-100"},Et=j({__name:"AccountSettingAbout",setup(L){const r=g({}),i=g([]),f=g(!1),_=g(""),d=g(""),c=g("");function V($,E){d.value=$,c.value=E.replaceAll(`\r
`,"<br />"),f.value=!0}async function m(){try{const $=await w.get("system/env");r.value=$.data}catch($){console.log($)}}async function h(){try{const $=await w.get("system/versions");i.value=$.data??[],i.value.length>0&&(_.value=i.value[0].tag_name)}catch($){console.log($)}}function b($){return`${Ee($)}前`}return K(()=>{m(),h()}),($,E)=>{const G=ve;return p(),k(T,null,[l("div",at,[l("div",ot,[nt,l("div",it,[l("dl",null,[l("div",null,[l("div",ut,[rt,l("dd",dt,[l("span",ct,[l("code",mt,R(s(r).VERSION),1),s(_)===s(r).VERSION?(p(),k("a",ft,_t)):z("",!0)])])])]),l("div",null,[l("div",vt,[gt,l("dd",yt,[l("span",xt,[l("code",null,R(s(r).CONFIG_DIR),1)])])]),ht]),l("div",null,[l("div",bt,[Vt,l("dd",wt,[l("span",Ct,[l("code",null,R(s(r).TZ),1)])])])])])])]),kt,l("div",St,[l("div",null,[$t,l("div",Rt,[l("div",null,[(p(!0),k(T,null,N(s(i),a=>(p(),k("div",{key:a.tag_name,class:"mb-3 flex w-full flex-col space-y-3 rounded-md px-4 py-2 shadow-md ring-1 ring-gray-400 sm:flex-row sm:space-y-0 sm:space-x-3"},[l("div",Ut,[l("span",It,[l("span",Dt,R(b(a.published_at)),1),x(" "+R(a.tag_name),1)]),a.tag_name===s(_)?(p(),k("span",Ft," 最新软件版本 ")):z("",!0),a.tag_name===s(r).VERSION?(p(),k("span",At," 当前版本 ")):z("",!0)]),e(U,{onClick:te(o=>V(a.tag_name,a.body),["stop"])},{prepend:t(()=>[e(B,{icon:"mdi-text-box-outline"})]),default:t(()=>[x(" 查看变更日志 ")]),_:2},1032,["onClick"])]))),128))])])])])]),e(fe,{modelValue:s(f),"onUpdate:modelValue":E[1]||(E[1]=a=>P(f)?f.value=a:null),width:"600",scrollable:""},{default:t(()=>[e(D,null,{default:t(()=>[e(I,null,{default:t(()=>[e(G,{onClick:E[0]||(E[0]=a=>f.value=!1)}),e(pe,null,{default:t(()=>[x(R(s(d))+" 变更日志",1)]),_:1})]),_:1}),e(M,{innerHTML:s(c)},null,8,["innerHTML"])]),_:1})]),_:1},8,["modelValue"])],64)}}});const Ht=j({__name:"setting",setup(L){const r=Ie(),i=g(r.params.tab),f=[{title:"用户",icon:"mdi-account",tab:"account"},{title:"站点",icon:"mdi-web",tab:"site"},{title:"规则",icon:"mdi-filter-cog",tab:"filter"},{title:"通知",icon:"mdi-bell",tab:"notification"},{title:"词表",icon:"mdi-file-word-box",tab:"words"},{title:"日志",icon:"mdi-text-box",tab:"logging"},{title:"关于",icon:"mdi-information",tab:"about"}];return(_,d)=>(p(),k("div",null,[e(De,{modelValue:s(i),"onUpdate:modelValue":d[0]||(d[0]=c=>P(i)?i.value=c:null),"show-arrows":""},{default:t(()=>[(p(),k(T,null,N(f,c=>e(Ae,{key:c.icon,value:c.tab},{default:t(()=>[e(B,{size:"20",start:"",icon:c.icon},null,8,["icon"]),x(" "+R(c.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(ae),e(Fe,{modelValue:s(i),"onUpdate:modelValue":d[1]||(d[1]=c=>P(i)?i.value=c:null),class:"mt-5 disable-tab-transition"},{default:t(()=>[e(W,{value:"account"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ne)]),_:1})]),_:1}),e(W,{value:"site"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Qe)]),_:1})]),_:1}),e(W,{value:"filter"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ze)]),_:1})]),_:1}),e(W,{value:"notification"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ye)]),_:1})]),_:1}),e(W,{value:"words"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(et)]),_:1})]),_:1}),e(W,{value:"logging"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(st)]),_:1})]),_:1}),e(W,{value:"about"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Et)]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Ht as default};
