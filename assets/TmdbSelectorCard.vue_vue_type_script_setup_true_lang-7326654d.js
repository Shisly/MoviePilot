import{d as w,r as d,e as k,o as r,f as u,i as t,m as s,E as b,j as i,F as C,J as L,aD as x,a2 as T,c as g,W as I,M as V,ag as $,a as M,Y as S,K as B,t as K,Z as N,a0 as j,a1 as D,$ as h,A as F}from"./index-49c87d9c.js";import{a as E}from"./index-c83b720a.js";const H={class:"w-full h-full"},U=w({__name:"TmdbSelectorCard",emits:["update:modelValue","close"],setup(W,{emit:p}){const l=d([]),n=d(""),c=d(!1);function v(e){console.log(e),p("update:modelValue",e.tmdbid),p("close")}function _(e=""){return e?e.replace("original","w500"):""}async function m(){if(n)try{c.value=!0;const e=await E.get("media/search",{params:{title:n.value,page:1,count:20}});l.value=[];for(const a of e)l.value.push({tmdbid:a.tmdb_id||0,poster:_(a.poster_path),title:`${a.title}（${a.year}）`,overview:`<span class="text-primary">${a.type}</span> ${a.overview}`});c.value=!1}catch(e){console.error(e)}}return(e,a)=>{const y=k("VSkeletonLoader");return r(),u(F,{class:"mx-auto",width:"100%"},{default:t(()=>[s(x,{flat:"",dense:""},{default:t(()=>[s(b,{modelValue:i(n),"onUpdate:modelValue":a[0]||(a[0]=o=>C(n)?n.value=o:null),density:"compact",label:"输入名称搜索","single-line":"","hide-details":"",flat:"",class:"mx-3","append-inner-icon":"mdi-magnify",loading:i(c),"onClick:appendInner":m,onKeydown:L(m,["enter"])},null,8,["modelValue","loading","onKeydown"])]),_:1}),i(l).length>0?(r(),u(T,{key:0,lines:"three"},{default:t(()=>[(r(!0),g(V,null,I(i(l),(o,f)=>(r(),g(V,{key:f},[s(j,{density:"compact",onClick:A=>v(o)},{prepend:t(()=>[s($,{height:"75",width:"50",src:o.poster,"aspect-ratio":"2/3",class:"object-cover rounded shadow ring-gray-500 me-3",cover:""},{placeholder:t(()=>[M("div",H,[s(y,{class:"object-cover aspect-w-2 aspect-h-3"})])]),_:2},1032,["src"])]),default:t(()=>[s(S,null,{default:t(()=>[B(K(o.title),1)]),_:2},1024),s(N,{innerHTML:o.overview},null,8,["innerHTML"])]),_:2},1032,["onClick"]),f<i(l).length-1?(r(),u(D,{key:0,class:"mt-1",inset:""})):h("",!0)],64))),128))]),_:1})):h("",!0)]),_:1})}}});export{U as _};
