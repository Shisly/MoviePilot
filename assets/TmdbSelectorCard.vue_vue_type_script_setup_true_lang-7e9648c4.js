import{d as k,r as c,q as b,e as C,o as r,f as u,i as t,m as s,E as L,j as i,F as x,J as T,aD as I,a2 as K,c as g,W as M,M as V,ag as $,a as S,Y as B,K as N,t as j,Z as D,a0 as F,a1 as E,$ as _,A as H}from"./index-29acab4d.js";import{a as W}from"./index-585ed20f.js";const q={class:"w-full h-full"},Y=k({__name:"TmdbSelectorCard",emits:["update:modelValue","close"],setup(A,{emit:m}){const l=c([]),n=c(""),d=c(!1),p=c(null);function h(e){console.log(e),m("update:modelValue",e.tmdbid),m("close")}function y(e=""){return e?e.replace("original","w500"):""}async function f(){if(n)try{d.value=!0;const e=await W.get("media/search",{params:{title:n.value,page:1,count:20}});l.value=[];for(const a of e)l.value.push({tmdbid:a.tmdb_id||0,poster:y(a.poster_path),title:`${a.title}（${a.year}）`,overview:`<span class="text-primary">${a.type}</span> ${a.overview}`});d.value=!1}catch(e){console.error(e)}}return b(()=>{setTimeout(()=>{var e;(e=p.value)==null||e.focus()},500)}),(e,a)=>{const w=C("VSkeletonLoader");return r(),u(H,{class:"mx-auto",width:"100%"},{default:t(()=>[s(I,{flat:"",class:"p-0"},{default:t(()=>[s(L,{ref_key:"tmdbKeyword",ref:p,modelValue:i(n),"onUpdate:modelValue":a[0]||(a[0]=o=>x(n)?n.value=o:null),label:"输入名称搜索","single-line":"",placeholder:"电影或电视剧名称",variant:"solo","append-inner-icon":"mdi-magnify",flat:"",class:"mx-1",loading:i(d),"onClick:appendInner":f,onKeydown:T(f,["enter"])},null,8,["modelValue","loading","onKeydown"])]),_:1}),i(l).length>0?(r(),u(K,{key:0,lines:"three"},{default:t(()=>[(r(!0),g(V,null,M(i(l),(o,v)=>(r(),g(V,{key:v},[s(F,{onClick:J=>h(o)},{prepend:t(()=>[s($,{height:"75",width:"50",src:o.poster,"aspect-ratio":"2/3",class:"object-cover rounded shadow ring-gray-500 me-3",cover:""},{placeholder:t(()=>[S("div",q,[s(w,{class:"object-cover aspect-w-2 aspect-h-3"})])]),_:2},1032,["src"])]),default:t(()=>[s(B,null,{default:t(()=>[N(j(o.title),1)]),_:2},1024),s(D,{class:"mt-2",innerHTML:o.overview},null,8,["innerHTML"])]),_:2},1032,["onClick"]),v<i(l).length-1?(r(),u(E,{key:0,class:"mt-1",inset:""})):_("",!0)],64))),128))]),_:1})):_("",!0)]),_:1})}}});export{Y as _};
