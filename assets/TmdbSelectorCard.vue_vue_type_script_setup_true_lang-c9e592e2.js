import{d as k,r as c,q as b,e as L,o as r,f as u,i as t,m as s,D as C,j as i,E as x,F as T,aE as I,a1 as $,c as _,U as K,L as g,ag as M,a as S,X as B,J as N,t as j,Y as D,$ as E,a0 as F,_ as V,z as H}from"./index-e47a80b5.js";import{a as U}from"./index-253bfa29.js";const q={class:"w-full h-full"},X=k({__name:"TmdbSelectorCard",emits:["update:modelValue","close"],setup(z,{emit:m}){const l=c([]),n=c(""),d=c(!1),p=c(null);function h(e){console.log(e),m("update:modelValue",e.tmdbid),m("close")}function y(e=""){return e?e.replace("original","w500"):""}async function f(){if(n)try{d.value=!0;const e=await U.get("media/search",{params:{title:n.value,page:1,count:20}});l.value=[];for(const a of e)l.value.push({tmdbid:a.tmdb_id||0,poster:y(a.poster_path),title:`${a.title}（${a.year}）`,overview:`<span class="text-primary">${a.type}</span> ${a.overview}`});d.value=!1}catch(e){console.error(e)}}return b(()=>{setTimeout(()=>{var e;(e=p.value)==null||e.focus()},500)}),(e,a)=>{const w=L("VSkeletonLoader");return r(),u(H,{class:"mx-auto",width:"100%"},{default:t(()=>[s(I,{flat:"",class:"p-0"},{default:t(()=>[s(C,{ref_key:"tmdbKeyword",ref:p,modelValue:i(n),"onUpdate:modelValue":a[0]||(a[0]=o=>x(n)?n.value=o:null),label:"输入名称搜索","single-line":"",placeholder:"电影或电视剧名称",variant:"solo","append-inner-icon":"mdi-magnify",flat:"",class:"mx-1",loading:i(d),"onClick:appendInner":f,onKeydown:T(f,["enter"])},null,8,["modelValue","loading","onKeydown"])]),_:1}),i(l).length>0?(r(),u($,{key:0,lines:"three"},{default:t(()=>[(r(!0),_(g,null,K(i(l),(o,v)=>(r(),_(g,{key:v},[s(E,{onClick:J=>h(o)},{prepend:t(()=>[s(M,{height:"75",width:"50",src:o.poster,"aspect-ratio":"2/3",class:"object-cover rounded shadow ring-gray-500 me-3",cover:""},{placeholder:t(()=>[S("div",q,[s(w,{class:"object-cover aspect-w-2 aspect-h-3"})])]),_:2},1032,["src"])]),default:t(()=>[s(B,null,{default:t(()=>[N(j(o.title),1)]),_:2},1024),s(D,{class:"mt-2",innerHTML:o.overview},null,8,["innerHTML"])]),_:2},1032,["onClick"]),v<i(l).length-1?(r(),u(F,{key:0,class:"mt-1",inset:""})):V("",!0)],64))),128))]),_:1})):V("",!0)]),_:1})}}});export{X as _};
