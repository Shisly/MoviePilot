import{d as j,r as x,an as Z,N as ve,q as K,e as ge,o as p,c as S,m as e,i as t,D as R,A,B as N,a3 as ye,j as s,a as l,I,V as B,a8 as ae,Q as le,C as G,E as O,F as T,K as b,f as P,P as te,ah as ce,M as L,a2 as q,t as U,_ as se,R as xe,S as he,aa as be,a9 as Ve,a7 as oe,a4 as ne,W as z,G as we,H as Ce,L as me,aG as ie,a1 as $,aH as ee,Y as fe,av as pe,X as E,Z as J,aq as ke,O as ue,au as $e,aw as Se,aI as Re,aJ as Ue,b as Ie,aK as De,aL as Fe,aM as Ae,aN as W,T as Y}from"./index-9a44e8f0.js";import{r as re}from"./index-705cb9e8.js";import{_ as _e}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-a0e84f1a.js";import{c as Ee}from"./index-d2c33d5a.js";const Pe={class:"d-flex flex-column justify-center gap-5"},Te={class:"d-flex flex-wrap gap-2"},Be=l("span",{class:"d-none d-sm-block"},"上传头像",-1),Le=l("span",{class:"d-none d-sm-block"},"重置",-1),He=l("p",{class:"text-body-1 mb-0"}," 允许 JPG、GIF 或 PNG 格式， 最大尺寸 800K。 ",-1),Me=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," 用户名 "),l("th",{scope:"col"}," 邮箱 "),l("th",{scope:"col"}," 状态 "),l("th",{scope:"col"}," 管理员 "),l("th",{scope:"col",class:"w-5"})])],-1),Ne=j({__name:"AccountSettingAccount",setup(H){const n=x(!1),a=x(!1),_=x(!1),m=x(""),i=x(""),u=Z.useToast(),w=x(),d=x(!1),h=ve({name:"",password:"",email:""}),V=x({id:0,name:"",password:"",email:"",is_active:!1,is_superuser:!1,avatar:""}),v=x([]);function C(y){const o=new FileReader,{files:X}=y.target;X&&X.length>0&&(o.readAsDataURL(X[0]),o.onload=()=>{typeof o.result=="string"&&(V.value.avatar=o.result,c())})}function D(){V.value.avatar=ie}async function f(){try{const y=await $.get("user/current");V.value=y,V.value.avatar||(V.value.avatar=ie)}catch(y){console.log(y)}}async function c(){if(m.value||i.value){if(m.value!==i.value){u.error("两次输入的密码不一致");return}V.value.password=m.value}try{const y=await $.put("user",V.value);y.success?u.success("用户信息保存成功！"):u.error(`用户信息保存失败：${y.message}！`)}catch(y){console.log(y)}}async function r(){try{const y=await $.get("/user");v.value=y}catch(y){console.log(y)}}async function k(y){try{const o=await $.delete(`user/${y.name}`);o.success?(u.success("用户删除成功！"),r()):u.error(`用户删除失败：${o.message}！`)}catch(o){console.log(o)}}async function F(y){try{y.is_active=!y.is_active;const o=await $.put("user",y);o.success?(u.success("用户冻结成功！"),r()):u.error(`用户冻结失败：${o.message}！`)}catch(o){console.log(o)}}async function M(){try{const y=await $.post("user",h);y.success?(u.success("用户新增成功！"),r(),d.value=!1):u.error(`用户新增失败：${y.message}！`)}catch(y){console.log(y)}}return K(()=>{f(),r()}),(y,o)=>{const X=ge("IconBtn");return p(),S(L,null,[e(G,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(A,{title:"个人信息"},{default:t(()=>[e(N,{class:"d-flex"},{default:t(()=>[e(ye,{rounded:"lg",size:"100",class:"me-6",image:s(V).avatar},null,8,["image"]),l("form",Pe,[l("div",Te,[e(I,{color:"primary",onClick:o[0]||(o[0]=g=>{var Q;return(Q=s(w))==null?void 0:Q.click()})},{default:t(()=>[e(B,{icon:"mdi-cloud-upload-outline",class:"d-sm-none"}),Be]),_:1}),l("input",{ref_key:"refInputEl",ref:w,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:C},null,544),e(I,{type:"reset",color:"error",variant:"tonal",onClick:D},{default:t(()=>[Le,e(B,{icon:"mdi-refresh",class:"d-sm-none"})]),_:1})]),He])]),_:1}),e(ae),e(N,null,{default:t(()=>[e(le,{class:"mt-6"},{default:t(()=>[e(G,null,{default:t(()=>[e(R,{md:"6",cols:"12"},{default:t(()=>[e(O,{modelValue:s(V).name,"onUpdate:modelValue":o[1]||(o[1]=g=>s(V).name=g),readonly:"",label:"用户名"},null,8,["modelValue"])]),_:1}),e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(V).email,"onUpdate:modelValue":o[2]||(o[2]=g=>s(V).email=g),label:"邮箱",type:"email"},null,8,["modelValue"])]),_:1}),e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(m),"onUpdate:modelValue":o[3]||(o[3]=g=>T(m)?m.value=g:null),type:s(n)?"text":"password","append-inner-icon":s(n)?"mdi-eye-off-outline":"mdi-eye-outline",label:"新密码",autocomplete:"new-password","onClick:appendInner":o[4]||(o[4]=g=>n.value=!s(n))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(i),"onUpdate:modelValue":o[5]||(o[5]=g=>T(i)?i.value=g:null),type:s(a)?"text":"password","append-inner-icon":s(a)?"mdi-eye-off-outline":"mdi-eye-outline",label:"确认新密码","onClick:appendInner":o[6]||(o[6]=g=>a.value=!s(a))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(R,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(I,{onClick:c},{default:t(()=>[b(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(V).is_superuser?(p(),P(R,{key:0,cols:"12"},{default:t(()=>[e(A,{title:"所有用户"},{append:t(()=>[e(X,{onClick:o[7]||(o[7]=te(g=>d.value=!0,["stop"]))},{default:t(()=>[e(B,{icon:"mdi-plus"})]),_:1})]),default:t(()=>[e(ce,{class:"text-no-wrap"},{default:t(()=>[Me,l("tbody",null,[(p(!0),S(L,null,q(s(v),g=>(p(),S("tr",{key:g.name},[l("td",null,U(g.name),1),l("td",null,U(g.email),1),l("td",null,[g.is_active?(p(),P(se,{key:0,color:"success","text-color":"white"},{default:t(()=>[b(" 激活 ")]),_:1})):(p(),P(se,{key:1,color:"error","text-color":"white"},{default:t(()=>[b(" 冻结 ")]),_:1}))]),l("td",null,U(g.is_superuser?"是":"否"),1),l("td",null,[xe(e(X,null,{default:t(()=>[e(B,{icon:"mdi-dots-vertical"}),e(be,{activator:"parent","close-on-content-click":""},{default:t(()=>[e(Ve,null,{default:t(()=>[e(oe,{variant:"plain",onClick:Q=>F(g)},{prepend:t(()=>[e(B,{icon:"mdi-lock"})]),default:t(()=>[e(ne,null,{default:t(()=>[b(U(g.is_active?"冻结":"解冻"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(oe,{variant:"plain","base-color":"error",onClick:Q=>k(g)},{prepend:t(()=>[e(B,{icon:"mdi-delete"})]),default:t(()=>[e(ne,null,{default:t(()=>[b("删除")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536),[[he,!g.is_superuser]])])]))),128))])]),_:1})]),_:1})]),_:1})):z("",!0)]),_:1}),e(me,{modelValue:s(d),"onUpdate:modelValue":o[13]||(o[13]=g=>T(d)?d.value=g:null),"max-width":"800",persistent:""},{default:t(()=>[e(A,{title:"新增用户"},{default:t(()=>[e(N,null,{default:t(()=>[e(le,{onSubmit:te(()=>{},["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).name,"onUpdate:modelValue":o[8]||(o[8]=g=>s(h).name=g),label:"用户名",rules:[s(re)]},null,8,["modelValue","rules"])]),_:1}),e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).password,"onUpdate:modelValue":o[9]||(o[9]=g=>s(h).password=g),label:"密码",rules:[s(re)],type:s(_)?"text":"password","append-inner-icon":s(_)?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":o[10]||(o[10]=g=>_.value=!s(_))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(R,{cols:"12",md:"6"},{default:t(()=>[e(O,{modelValue:s(h).email,"onUpdate:modelValue":o[11]||(o[11]=g=>s(h).email=g),label:"邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(we,null,{default:t(()=>[e(I,{onClick:o[12]||(o[12]=g=>d.value=!1)},{default:t(()=>[b(" 取消 ")]),_:1}),e(Ce),e(I,{onClick:M},{default:t(()=>[b(" 确定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),je=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," 消息类型 "),l("th",{scope:"col"}," 微信 "),l("th",{scope:"col"}," Telegram "),l("th",{scope:"col"}," Slack ")])],-1),Ge={key:0},qe=l("td",{colspan:"4",class:"text-center"}," 没有设置任何通知渠道 ",-1),Oe=[qe],We={class:"d-flex flex-wrap gap-4 mt-4"},Ye=j({__name:"AccountSettingNotification",setup(H){const n=x([]),a=Z.useToast();async function _(){try{const i=await $.get("message/switchs");n.value=i}catch(i){console.log(i)}}async function m(){try{(await $.post("message/switchs",n.value)).success?a.success("保存通知消息设置成功"):a.error("保存通知消息设置失败！")}catch(i){console.log(i)}}return K(()=>{_()}),(i,u)=>(p(),P(A,{title:"消息通知"},{default:t(()=>[e(N,null,{default:t(()=>[b(" 对应消息类型只会发送给选中的消息渠道 ")]),_:1}),e(ce,{class:"text-no-wrap"},{default:t(()=>[je,l("tbody",null,[(p(!0),S(L,null,q(s(n),w=>(p(),S("tr",{key:w.mtype},[l("td",null,U(w.mtype),1),l("td",null,[e(ee,{modelValue:w.wechat,"onUpdate:modelValue":d=>w.wechat=d},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(ee,{modelValue:w.telegram,"onUpdate:modelValue":d=>w.telegram=d},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(ee,{modelValue:w.slack,"onUpdate:modelValue":d=>w.slack=d},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),s(n).length===0?(p(),S("tr",Ge,Oe)):z("",!0)])]),_:1}),e(ae),e(N,null,{default:t(()=>[e(le,{onSubmit:te(()=>{},["prevent"])},{default:t(()=>[l("div",We,[e(I,{mtype:"submit",onClick:m},{default:t(()=>[b(" 保存 ")]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1}))}}),de=j({__name:"FilterRuleCard",props:{pri:String,rules:Array,width:String,height:String},emits:["close","changed"],setup(H,{emit:n}){const a=H;function _(){n("close")}function m(w){n("changed",a.pri,w)}const i=x([{title:"特效字幕",value:" SPECSUB "},{title:"中文字幕",value:" CNSUB "},{title:"分辨率: 4K",value:" 4K "},{title:"分辨率: 1080P",value:" 1080P "},{title:"分辨率: 720P",value:" 720P "},{title:"排除: 720P",value:" !720P "},{title:"质量: 蓝光原盘",value:" BLU "},{title:"排除: 蓝光原盘",value:" !BLU "},{title:"质量: BLURAY",value:" BLURAY "},{title:"排除: BLURAY",value:" !BLURAY "},{title:"质量: UHD",value:" UHD "},{title:"排除: UHD",value:" !UHD "},{title:"质量: REMUX",value:" REMUX "},{title:"排除: REMUX",value:" !REMUX "},{title:"质量: WEB-DL",value:" WEBDL "},{title:"排除: WEB-DL",value:" !WEBDL "},{title:"编码: H265",value:" H265 "},{title:"排除: H265",value:" !H265 "},{title:"编码: H264",value:" H264 "},{title:"排除: H264",value:" !H264 "},{title:"效果: 杜比视界",value:" DOLBY "},{title:"排除: 杜比视界",value:" !DOLBY "},{title:"效果: HDR",value:" HDR "},{title:"排除: HDR",value:" !HDR "},{title:"国语配音",value:" CNVOI "},{title:"排除: 国语配音",value:" !CNVOI "},{title:"促销: 免费",value:" FREE "}]),u=x(a.rules??[]);return(w,d)=>{const h=_e;return p(),P(A,{variant:"tonal",width:a.width,height:a.height},{default:t(()=>[e(h,{onClick:_}),e(E,null,{default:t(()=>[e(fe,null,{default:t(()=>[b("优先级 "+U(a.pri),1)]),_:1}),e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[(p(),P(pe,{key:a.pri,modelValue:s(u),"onUpdate:modelValue":[d[0]||(d[0]=V=>T(u)?u.value=V:null),m],variant:"underlined",items:s(i),chips:"",label:"",multiple:""},null,8,["modelValue","items"]))]),_:1})]),_:1})]),_:1})]),_:1},8,["width","height"])}}}),Ke={class:"grid gap-3 grid-filterrule-card"},Xe=l("span",{class:"d-none d-sm-block"},"增加规则",-1),ze={class:"grid gap-3 grid-filterrule-card"},Je=l("span",{class:"d-none d-sm-block"},"增加规则",-1),Ze=j({__name:"AccountSettingRule",setup(H){const n=Z.useToast(),a=x("seeder"),_=[{title:"站点优先",value:"site"},{title:"做种数优先",value:"seeder"}],m=x([]),i=x([]);async function u(f){var c,r;try{const k=await $.get(`system/setting/${f}`);if(k.success){const F=((r=(c=k.data)==null?void 0:c.value)==null?void 0:r.split(">"))??[],M=f==="FilterRules"?m:i;M.value=F==null?void 0:F.map((y,o)=>({pri:(o+1).toString(),rules:y.split("&"),visible:!0}))}}catch(k){console.log(k)}}async function w(){var f;try{const c=await $.get("system/setting/TorrentsPriority");a.value=(f=c.data)==null?void 0:f.value}catch(c){console.log(c)}}async function d(f){try{let c="";m.value.length!==0&&(c=(f==="FilterRules"?m:i).value.filter(M=>M.rules.length>0).map(M=>M.rules.join("&")).join(">"));const r=await $.post(`system/setting/${f}`,c),k=f==="FilterRules"?"过滤规则":"洗版规则";r.success?n.success(`${k}保存成功`):n.error(`${k}保存失败！`)}catch(c){console.log(c)}}async function h(){try{(await $.post("system/setting/TorrentsPriority",a.value)).success?n.success("优先规则保存成功"):n.error("优先规则保存失败！")}catch(f){console.log(f)}}function V(f,c){const r=m.value.find(k=>k.pri===f);r&&(r.rules=c)}function v(f,c){const r=i.value.find(k=>k.pri===f);r&&(r.rules=c)}function C(f,c){const r=f==="FilterRules"?m:i,k=r.value.findIndex(F=>F.pri===c);if(k!==-1){const F=[...r.value];F.splice(k,1),F.forEach((M,y)=>{M.pri=(y+1).toString()}),r.value=F}}function D(f){const c=f==="FilterRules"?m:i,k={pri:(c.value.length+1).toString(),rules:[],visible:!0};c.value.push(k)}return K(()=>{w(),u("FilterRules"),u("FilterRules2")}),(f,c)=>(p(),P(G,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(A,{title:"过滤规则"},{default:t(()=>[e(J,null,{default:t(()=>[b(" 设置在搜索和订阅时默认使用的过滤规则 ")]),_:1}),e(E,null,{default:t(()=>[l("div",Ke,[(p(!0),S(L,null,q(s(m),(r,k)=>(p(),P(de,{key:k,pri:r.pri,rules:r.rules,visible:r.visible,onChanged:V,onClose:F=>C("FilterRules",r.pri)},null,8,["pri","rules","visible","onClose"]))),128))])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",class:"me-2",onClick:c[0]||(c[0]=r=>d("FilterRules"))},{default:t(()=>[b(" 保存 ")]),_:1}),e(I,{color:"success",variant:"tonal",onClick:c[1]||(c[1]=r=>D("FilterRules"))},{default:t(()=>[e(B,{icon:"mdi-plus"}),Xe]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(A,{title:"洗版规则"},{default:t(()=>[e(J,null,{default:t(()=>[b(" 设置在订阅洗版时使用的过滤规则，匹配优先级1时洗版完成 ")]),_:1}),e(E,null,{default:t(()=>[l("div",ze,[(p(!0),S(L,null,q(s(i),(r,k)=>(p(),P(de,{key:k,pri:r.pri,rules:r.rules,visible:r.visible,onChanged:v,onClose:F=>C("FilterRules2",r.pri)},null,8,["pri","rules","visible","onClose"]))),128))])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",class:"me-2",onClick:c[2]||(c[2]=r=>d("FilterRules2"))},{default:t(()=>[b(" 保存 ")]),_:1}),e(I,{color:"success",variant:"tonal",onClick:c[3]||(c[3]=r=>D("FilterRules2"))},{default:t(()=>[e(B,{icon:"mdi-plus"}),Je]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(A,{title:"下载优先规则"},{default:t(()=>[e(N,null,{default:t(()=>[e(pe,{modelValue:s(a),"onUpdate:modelValue":c[4]||(c[4]=r=>T(a)?a.value=r:null),items:_,label:"优先规则",outlined:""},null,8,["modelValue"])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",onClick:h},{default:t(()=>[b(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Qe=j({__name:"AccountSettingSite",setup(H){const n=Z.useToast(),a=x([]),_=x([]),m=x(!1),i=x("重置站点数据"),u=x(!1);async function w(){try{const v=await $.get("site");_.value=v.filter(C=>C.is_active),d()}catch(v){console.log(v)}}async function d(){var v;try{const C=await $.get("system/setting/IndexerSites");a.value=(v=C.data)==null?void 0:v.value}catch(C){console.log(C)}}async function h(){try{(await $.post("system/setting/IndexerSites",a.value)).success?n.success("索引站点保存成功"):n.error("索引站点保存失败！")}catch(v){console.log(v)}}async function V(){try{u.value=!0,i.value="正在重置...",(await $.get("site/reset")).success?(n.success("站点重置成功，请等待CookieCloud同步完成！"),w()):n.error("站点重置失败！"),u.value=!1,i.value="重置站点数据"}catch(v){console.log(v)}}return K(()=>{w()}),(v,C)=>(p(),P(G,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(A,{title:"索引站点"},{default:t(()=>[e(J,null,{default:t(()=>[b(" 只有选中的站点才会在搜索和订阅中使用")]),_:1}),e(E,null,{default:t(()=>[e(ke,{modelValue:s(a),"onUpdate:modelValue":C[0]||(C[0]=D=>T(a)?a.value=D:null),column:"",multiple:""},{default:t(()=>[(p(!0),S(L,null,q(s(_),D=>(p(),P(se,{key:D.id,color:s(a).includes(D.id)?"primary":"",filter:"",variant:"outlined",value:D.id},{default:t(()=>[b(U(D.name),1)]),_:2},1032,["color","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",onClick:h},{default:t(()=>[b(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(A,{title:"站点重置"},{default:t(()=>[e(N,null,{default:t(()=>[l("div",null,[e(ee,{modelValue:s(m),"onUpdate:modelValue":C[1]||(C[1]=D=>T(m)?m.value=D:null),label:"确认删除所有站点数据并重新同步"},null,8,["modelValue"])]),e(I,{disabled:!s(m)||s(u),color:"error",class:"mt-3",onClick:V},{default:t(()=>[b(U(s(i)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),et=j({__name:"AccountSettingWords",setup(H){const n=Z.useToast(),a=x(""),_=x("");async function m(){var d;try{const h=await $.get("system/setting/CustomIdentifiers");a.value=(d=h.data)==null?void 0:d.value.join(`
`)}catch(h){console.log(h)}}async function i(){var d;try{const h=await $.get("system/setting/CustomReleaseGroups");_.value=(d=h.data)==null?void 0:d.value.join(`
`)}catch(h){console.log(h)}}async function u(){try{(await $.post("system/setting/CustomIdentifiers",a.value.split(`
`))).success?n.success("自定义识别词保存成功"):n.error("自定义识别词保存失败！")}catch(d){console.log(d)}}async function w(){try{(await $.post("system/setting/CustomReleaseGroups",_.value.split(`
`))).success?n.success("自定义制作组/字幕组保存成功"):n.error("自定义制作组/字幕组保存失败！")}catch(d){console.log(d)}}return K(()=>{m(),i()}),(d,h)=>(p(),P(G,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(A,{title:"自定义识别词"},{default:t(()=>[e(J,null,{default:t(()=>[b(" 添加规则对种子名或者文件名进行预处理以校正识别 ")]),_:1}),e(E,null,{default:t(()=>[e(ue,{modelValue:s(a),"onUpdate:modelValue":h[0]||(h[0]=V=>T(a)?a.value=V:null),"auto-grow":"",placeholder:`支持正则表达式，特殊字符需要\\转义，一行为一组，支持三种配置格式：
屏蔽词
被替换词 => 替换词
前定位词 <> 后定位词 >> 偏移量（EP）`},null,8,["modelValue"])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",onClick:u},{default:t(()=>[b(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(A,{title:"自定义制作组/字幕组"},{default:t(()=>[e(J,null,{default:t(()=>[b(" 添加无法识别的制作组/字幕组 ")]),_:1}),e(E,null,{default:t(()=>[e(ue,{modelValue:s(_),"onUpdate:modelValue":h[1]||(h[1]=V=>T(_)?_.value=V:null),"auto-grow":"",placeholder:"支持正则表达式，特殊字符需要\\转义，一行代表一个制作组/字幕组"},null,8,["modelValue"])]),_:1}),e(E,null,{default:t(()=>[e(I,{type:"submit",onClick:w},{default:t(()=>[b(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),tt={key:0,class:"mt-5 w-full text-center text-gray-500 text-sm flex flex-col items-center"},lt=l("span",{class:"mt-3"},"正在刷新 ...",-1),st=j({__name:"AccountSettingLogging",setup(H){const n=x([]);function a(){const _=Se.state.auth.token;if(_){const m=new EventSource(`/api/v1/system/logging?token=${_}`);m.addEventListener("message",i=>{const u=i.data;u&&n.value.push(u)}),Re(()=>{m.close()})}}return K(()=>{a()}),(_,m)=>(p(),P(G,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[e(A,{title:"实时日志"},{default:t(()=>[e(N,null,{default:t(()=>[s(n).length===0?(p(),S("div",tt,[e($e,{size:"48",indeterminate:"",color:"primary"}),lt])):z("",!0),(p(!0),S(L,null,q(s(n),(i,u)=>(p(),S("div",{key:u},U(i),1))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}}),at={class:"px-3"},ot={class:"section"},nt=l("div",null,[l("h3",{class:"heading"}," 关于 MoviePilot ")],-1),it={class:"section border-t border-gray-800"},ut={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},rt=l("dt",{class:"block text-sm font-bold"}," 当前版本 ",-1),dt={class:"flex text-sm sm:col-span-2 sm:mt-0"},ct={class:"flex-grow flex flex-row items-center truncate"},mt={class:"truncate"},ft={key:0,href:"https://github.com/jxxghp/MoviePilot/releases",target:"_blank",rel:"noopener noreferrer"},pt=l("span",{class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap bg-green-500 bg-opacity-80 border border-green-500 !text-green-100 ml-2 !cursor-pointer transition hover:bg-green-400"}," 最新 ",-1),_t=[pt],vt={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},gt=l("dt",{class:"block text-sm font-bold"}," 配置目录 ",-1),yt={class:"flex text-sm sm:col-span-2 sm:mt-0"},xt={class:"flex-grow undefined"},ht=l("div",{class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},[l("dt",{class:"block text-sm font-bold"}," 数据目录 "),l("dd",{class:"flex text-sm sm:col-span-2 sm:mt-0"},[l("span",{class:"flex-grow undefined"},[l("code",null,"/moviepilot")])])],-1),bt={class:"max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"},Vt=l("dt",{class:"block text-sm font-bold"}," 时区 ",-1),wt={class:"flex text-sm sm:col-span-2 sm:mt-0"},Ct={class:"flex-grow undefined"},kt=Ue('<div class="section"><div><h3 class="heading"> 支援 </h3></div><div class="section border-t border-gray-800"><dl><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 文档 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://github.com/jxxghp/MoviePilot/blob/main/README.md" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://github.com/jxxghp/MoviePilot/blob/main/README.md </a></span></dd></div></div><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 问题反馈 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://github.com/jxxghp/MoviePilot/issues/new/choose" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://github.com/jxxghp/MoviePilot/issues/new/choose </a></span></dd></div></div><div><div class="max-w-6xl py-4 sm:grid sm:grid-cols-3 sm:gap-4"><dt class="block text-sm font-bold"> 发布频道 </dt><dd class="flex text-sm sm:col-span-2 sm:mt-0"><span class="flex-grow undefined"><a href="https://t.me/moviepilot_channel" target="_blank" rel="noreferrer" class="text-indigo-500 transition duration-300 hover:underline"> https://t.me/moviepilot_channel </a></span></dd></div></div></dl></div></div>',1),$t={class:"section"},St=l("h3",{class:"heading"}," 软件版本 ",-1),Rt={class:"section space-y-3"},Ut={class:"flex w-full flex-grow items-center justify-start space-x-2 truncate sm:justify-start"},It={class:"truncate text-lg font-bold"},Dt={class:"mr-2 whitespace-nowrap text-xs font-normal"},Ft={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap cursor-default bg-green-500 bg-opacity-80 border border-green-500 !text-green-100"},At={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full whitespace-nowrap cursor-default bg-indigo-500 bg-opacity-80 border border-indigo-500 !text-indigo-100"},Et=j({__name:"AccountSettingAbout",setup(H){const n=x({}),a=x([]),_=x(!1),m=x(""),i=x(""),u=x("");function w(v,C){i.value=v,u.value=C.replaceAll(`\r
`,"<br />"),_.value=!0}async function d(){try{const v=await $.get("system/env");n.value=v.data}catch(v){console.log(v)}}async function h(){try{const v=await $.get("system/versions");a.value=v.data??[],a.value.length>0&&(m.value=a.value[0].tag_name)}catch(v){console.log(v)}}function V(v){return`${Ee(v)}前`}return K(()=>{d(),h()}),(v,C)=>{const D=_e;return p(),S(L,null,[l("div",at,[l("div",ot,[nt,l("div",it,[l("dl",null,[l("div",null,[l("div",ut,[rt,l("dd",dt,[l("span",ct,[l("code",mt,U(s(n).VERSION),1),s(m)===s(n).VERSION?(p(),S("a",ft,_t)):z("",!0)])])])]),l("div",null,[l("div",vt,[gt,l("dd",yt,[l("span",xt,[l("code",null,U(s(n).CONFIG_DIR),1)])])]),ht]),l("div",null,[l("div",bt,[Vt,l("dd",wt,[l("span",Ct,[l("code",null,U(s(n).TZ),1)])])])])])])]),kt,l("div",$t,[l("div",null,[St,l("div",Rt,[l("div",null,[(p(!0),S(L,null,q(s(a),f=>(p(),S("div",{key:f.tag_name,class:"mb-3 flex w-full flex-col space-y-3 rounded-md px-4 py-2 shadow-md ring-1 ring-gray-400 sm:flex-row sm:space-y-0 sm:space-x-3"},[l("div",Ut,[l("span",It,[l("span",Dt,U(V(f.published_at)),1),b(" "+U(f.tag_name),1)]),f.tag_name===s(m)?(p(),S("span",Ft," 最新软件版本 ")):z("",!0),f.tag_name===s(n).VERSION?(p(),S("span",At," 当前版本 ")):z("",!0)]),e(I,{onClick:te(c=>w(f.tag_name,f.body),["stop"])},{prepend:t(()=>[e(B,{icon:"mdi-text-box-outline"})]),default:t(()=>[b(" 查看变更日志 ")]),_:2},1032,["onClick"])]))),128))])])])])]),e(me,{modelValue:s(_),"onUpdate:modelValue":C[1]||(C[1]=f=>T(_)?_.value=f:null),width:"600",scrollable:""},{default:t(()=>[e(A,null,{default:t(()=>[e(E,null,{default:t(()=>[e(D,{onClick:C[0]||(C[0]=f=>_.value=!1)}),e(fe,null,{default:t(()=>[b(U(s(i))+" 变更日志",1)]),_:1})]),_:1}),e(N,{innerHTML:s(u)},null,8,["innerHTML"])]),_:1})]),_:1},8,["modelValue"])],64)}}});const Ht=j({__name:"setting",setup(H){const n=Ie(),a=x(n.params.tab),_=[{title:"用户",icon:"mdi-account",tab:"account"},{title:"站点",icon:"mdi-web",tab:"site"},{title:"规则",icon:"mdi-filter-cog",tab:"filter"},{title:"通知",icon:"mdi-bell",tab:"notification"},{title:"词表",icon:"mdi-file-word-box",tab:"words"},{title:"日志",icon:"mdi-text-box",tab:"logging"},{title:"关于",icon:"mdi-information",tab:"about"}];return(m,i)=>(p(),S("div",null,[e(De,{modelValue:s(a),"onUpdate:modelValue":i[0]||(i[0]=u=>T(a)?a.value=u:null),"show-arrows":""},{default:t(()=>[(p(),S(L,null,q(_,u=>e(Ae,{key:u.icon,value:u.tab},{default:t(()=>[e(B,{size:"20",start:"",icon:u.icon},null,8,["icon"]),b(" "+U(u.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(ae),e(Fe,{modelValue:s(a),"onUpdate:modelValue":i[1]||(i[1]=u=>T(a)?a.value=u:null),class:"mt-5 disable-tab-transition"},{default:t(()=>[e(W,{value:"account"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ne)]),_:1})]),_:1}),e(W,{value:"site"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Qe)]),_:1})]),_:1}),e(W,{value:"filter"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ze)]),_:1})]),_:1}),e(W,{value:"notification"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Ye)]),_:1})]),_:1}),e(W,{value:"words"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(et)]),_:1})]),_:1}),e(W,{value:"logging"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(st)]),_:1})]),_:1}),e(W,{value:"about"},{default:t(()=>[e(Y,{name:"fade-slide",appear:""},{default:t(()=>[e(Et)]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Ht as default};
